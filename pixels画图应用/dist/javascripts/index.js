define(["canvas","generate","nyan-cat"],function(e,a,t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var r=i(e),n=i(a),o=i(t),l={x:35,y:20,size:20,library:o["default"],parent:$("#app")[0]};$("#cols").val(l.x),$("#rows").val(l.y),$("#size").val(l.size),$("#name").val("miao");var s=new r["default"](l);$(".preview").width(l.x*l.size).height(l.y*l.size);var c=$('[name="colors"]');c.val(s.color),window.a=s;var v=(document.getElementById("createBtn"),void 0);$("#createBtn").on("click",function(){var e=(0,n["default"])(s,$("#name").val()||"pixel_map");$("#code").val(e)}),$("#emptyBtn").on("click",function(){s.empty()}),$("#previewBtn").on("click",function(){var e=(0,n["default"])(s,"miao");v?v.innerHTML=e:(v=document.createElement("style"),v.innerHTML=e,document.body.appendChild(v)),$(".preview").toggle()}),$(".preview").on("click",function(){$(this).hide()}),$(".color-block").on("click",function(){var e=$(this).parent(".preset-item");if(e.hasClass("active"))return!1;if($(".active").removeClass("active"),e.addClass("active"),e.hasClass("eraser"))s.mode="eraser";else{var a=$(this).data("color");c.val(a),s.mode="draw",s.color=a}}),$(".palette").on("click",function(){var e=$(this).parent(".preset-item");if(!e.hasClass("active"))if($(".active").removeClass("active"),e.addClass("active"),e.hasClass("eraser"))s.mode="eraser";else{var a=$(this).prev().data("color");c.val(a),s.mode="draw",s.color=a}}),c.on("change",function(){var e=$(this).parent(".preset-item"),a=e.find(".color-block");a.css("background-color",this.value),a.data("color",this.value),s.color=this.value}),$("#file").on("change",function(e){var a=e.target.files[0],t=new FileReader;t.onload=function(e){s.setImage(e.target.result)},t.readAsDataURL(a)}),$("#resetBtn").on("click",function(){s.x=+$("#cols").val(),s.y=+$("#rows").val(),s.size=+$("#size").val(),s.reset(),$(".preview").width(s.x*s.size).height(s.y*s.size)})});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImRlZmluZSIsIl9jYW52YXMiLCJfZ2VuZXJhdGUiLCJfbnlhbkNhdCIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9jYW52YXMyIiwiX2dlbmVyYXRlMiIsIl9ueWFuQ2F0MiIsIm9wdGlvbnMiLCJ4IiwieSIsInNpemUiLCJsaWJyYXJ5IiwicGFyZW50IiwiJCIsInZhbCIsImNhbnZhcyIsIndpZHRoIiwiaGVpZ2h0IiwiJGNvbG9ycyIsImNvbG9yIiwid2luZG93IiwiYSIsInByZXZpZXciLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwib24iLCJjc3MiLCJlbXB0eSIsImlubmVySFRNTCIsImNyZWF0ZUVsZW1lbnQiLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJ0b2dnbGUiLCJ0aGlzIiwiaGlkZSIsIiRpdGVtIiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwibW9kZSIsImRhdGEiLCJwcmV2IiwiJGJsb2NrIiwiZmluZCIsInZhbHVlIiwiZSIsImZpbGUiLCJ0YXJnZXQiLCJmaWxlcyIsInJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJzZXRJbWFnZSIsInJlc3VsdCIsInJlYWRBc0RhdGFVUkwiLCJyZXNldCJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQVEsU0FBVSxXQUFZLFlBQWEsU0FBVUMsRUFBU0MsRUFBV0MsR0FDeEUsWUFRQSxTQUFTQyxHQUF1QkMsR0FDL0IsTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FDOUJFLFVBQVNGLEdBUlgsR0FBSUcsR0FBV0osRUFBdUJILEdBRWxDUSxFQUFhTCxFQUF1QkYsR0FFcENRLEVBQVlOLEVBQXVCRCxHQUhwQ1EsR0FDSEMsRUFBRyxHQUNIQyxFQUFHLEdBQ0hDLEtBQU0sR0FDTkMsUUFBQUEsRUFBQUEsV0FDQUMsT0FBUUMsRUFBRSxRQUFRLEdBRW5CQSxHQUFFLFNBQVNDLElBQUlQ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eC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYW52YXMgZnJvbSAnY2FudmFzJ1xyXG5pbXBvcnQgZ2VuZXJhdGVDbGFzcyBmcm9tICdnZW5lcmF0ZSdcclxuaW1wb3J0IG55YW5DYXQgZnJvbSAnbnlhbi1jYXQnXHJcblxyXG5sZXQgb3B0aW9ucyA9IHtcclxuXHR4OiAzNSxcclxuXHR5OiAyMCxcclxuXHRzaXplOiAyMCxcclxuXHRsaWJyYXJ5OiBueWFuQ2F0LFxyXG5cdHBhcmVudDogJCgnI2FwcCcpWzBdXHJcbn1cclxuJCgnI2NvbHMnKS52YWwob3B0aW9ucy54KVxyXG4kKCcjcm93cycpLnZhbChvcHRpb25zLnkpXHJcbiQoJyNzaXplJykudmFsKG9wdGlvbnMuc2l6ZSlcclxuJCgnI25hbWUnKS52YWwoJ21pYW8nKVxyXG52YXIgY2FudmFzID0gbmV3IENhbnZhcyhvcHRpb25zKVxyXG4kKCcucHJldmlldycpLndpZHRoKG9wdGlvbnMueCAqIG9wdGlvbnMuc2l6ZSkuaGVpZ2h0KG9wdGlvbnMueSAqIG9wdGlvbnMuc2l6ZSlcclxubGV0ICRjb2xvcnMgPSAkKCdbbmFtZT1cImNvbG9yc1wiXScpXHJcbiRjb2xvcnMudmFsKGNhbnZhcy5jb2xvcilcclxud2luZG93LmEgPSBjYW52YXNcclxuXHJcbmxldCBjcmVhdGVfYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NyZWF0ZUJ0bicpXHJcbmxldCBwcmV2aWV3XHJcblxyXG4kKCcjY3JlYXRlQnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0bGV0IGNzcyA9IGdlbmVyYXRlQ2xhc3MoY2FudmFzLCAkKCcjbmFtZScpLnZhbCgpIHx8ICdwaXhlbF9tYXAnKVxyXG5cdCQoJyNjb2RlJykudmFsKGNzcylcclxufSlcclxuXHJcbiQoJyNlbXB0eUJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cdGNhbnZhcy5lbXB0eSgpXHJcbn0pXHJcblxyXG4kKCcjcHJldmlld0J0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cdGxldCBjc3MgPSBnZW5lcmF0ZUNsYXNzKGNhbnZhcywgJ21pYW8nKVxyXG5cdGlmIChwcmV2aWV3KSB7XHJcblx0XHRwcmV2aWV3LmlubmVySFRNTCA9IGNzc1xyXG5cdH1cclxuXHRlbHNlIHtcclxuXHRcdHByZXZpZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpXHJcblx0XHRwcmV2aWV3LmlubmVySFRNTCA9IGNzc1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChwcmV2aWV3KVxyXG5cdH1cclxuXHQkKCcucHJldmlldycpLnRvZ2dsZSgpXHJcbn0pXHJcblxyXG4kKCcucHJldmlldycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cdCQodGhpcykuaGlkZSgpXHJcbn0pXHJcblxyXG4kKCcuY29sb3ItYmxvY2snKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHRsZXQgJGl0ZW0gPSAkKHRoaXMpLnBhcmVudCgnLnByZXNldC1pdGVtJylcclxuXHRpZiAoJGl0ZW0uaGFzQ2xhc3MoJ2FjdGl2ZScpKVxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdCQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuXHQkaXRlbS5hZGRDbGFzcygnYWN0aXZlJylcclxuXHRpZiAoJGl0ZW0uaGFzQ2xhc3MoJ2VyYXNlcicpKSB7XHJcblx0XHRjYW52YXMubW9kZSA9ICdlcmFzZXInXHJcblx0fVxyXG5cdGVsc2Uge1xyXG5cdFx0bGV0IGNvbG9yID0gJCh0aGlzKS5kYXRhKCdjb2xvcicpXHJcblx0XHQkY29sb3JzLnZhbChjb2xvcilcclxuXHRcdGNhbnZhcy5tb2RlID0gJ2RyYXcnXHJcblx0XHRjYW52YXMuY29sb3IgPSBjb2xvclxyXG5cdH1cclxufSlcclxuXHJcbiQoJy5wYWxldHRlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0bGV0ICRpdGVtID0gJCh0aGlzKS5wYXJlbnQoJy5wcmVzZXQtaXRlbScpXHJcblx0aWYgKCEkaXRlbS5oYXNDbGFzcygnYWN0aXZlJykpIHtcclxuXHRcdCQoJy5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJylcclxuXHRcdCRpdGVtLmFkZENsYXNzKCdhY3RpdmUnKVxyXG5cclxuXHRcdGlmICgkaXRlbS5oYXNDbGFzcygnZXJhc2VyJykpIHtcclxuXHRcdFx0Y2FudmFzLm1vZGUgPSAnZXJhc2VyJ1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGxldCBjb2xvciA9ICQodGhpcykucHJldigpLmRhdGEoJ2NvbG9yJylcclxuXHRcdFx0JGNvbG9ycy52YWwoY29sb3IpXHJcblx0XHRcdGNhbnZhcy5tb2RlID0gJ2RyYXcnXHJcblx0XHRcdGNhbnZhcy5jb2xvciA9IGNvbG9yXHJcblx0XHR9XHJcblx0fVxyXG59KVxyXG5cclxuJGNvbG9ycy5vbignY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcblx0bGV0ICRpdGVtID0gJCh0aGlzKS5wYXJlbnQoJy5wcmVzZXQtaXRlbScpXHJcblx0bGV0ICRibG9jayA9ICRpdGVtLmZpbmQoJy5jb2xvci1ibG9jaycpXHJcblx0JGJsb2NrLmNzcygnYmFja2dyb3VuZC1jb2xvcicsIHRoaXMudmFsdWUpXHJcblx0JGJsb2NrLmRhdGEoJ2NvbG9yJywgdGhpcy52YWx1ZSlcclxuXHRjYW52YXMuY29sb3IgPSB0aGlzLnZhbHVlXHJcbn0pXHJcblxyXG4kKCcjZmlsZScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XHJcblx0bGV0IGZpbGUgPSBlLnRhcmdldC5maWxlc1swXVxyXG5cclxuXHR2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuXHRyZWFkZXIub25sb2FkID0gKGUpID0+IHtcclxuXHRcdGNhbnZhcy5zZXRJbWFnZShlLnRhcmdldC5yZXN1bHQpXHJcblx0fVxyXG5cdHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpXHJcbn0pXHJcblxyXG4kKCcjcmVzZXRCdG4nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHRjYW52YXMueCA9ICskKCcjY29scycpLnZhbCgpXHJcblx0Y2FudmFzLnkgPSArJCgnI3Jvd3MnKS52YWwoKVxyXG5cdGNhbnZhcy5zaXplID0gKyQoJyNzaXplJykudmFsKClcclxuXHRjYW52YXMucmVzZXQoKVxyXG5cdCQoJy5wcmV2aWV3Jykud2lkdGgoY2FudmFzLnggKiBjYW52YXMuc2l6ZSkuaGVpZ2h0KGNhbnZhcy55ICogY2FudmFzLnNpemUpXHJcbn0pIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
